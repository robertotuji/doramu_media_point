<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Resultado da Média dos Pontos</title>
  <link rel="manifest" href="manifest.json"/>
  <style>
    body { font-family: Arial, sans-serif; text-align:center; padding:20px; margin:0; background:#fff; color:#333; }
    h2 { margin-bottom:16px; font-size:1.5em; }
    #language-switcher { display:flex; justify-content:center; gap:12px; margin-bottom:20px; }
    #language-switcher img { width:64px; cursor:pointer; border:2px solid transparent; border-radius:8px; transition:border-color 0.2s; }
    #language-switcher img:hover, #language-switcher img.selected { border-color:#333; }
    .diagram { position:relative; max-width:400px; margin:0 auto 20px; background:#ccc; padding:8px; border-radius:8px; }
    .diagram img { width:100%; display:block; }
    .label { position:absolute; font-size:0.9em; font-weight:bold; color:#000; }
    .label.red { color:red; }
    .A { top:12%; left:50%; transform:translate(-50%, -50%); }
    .B { top:28%; left:50%; transform:translate(-50%, -50%); }
    .C { top:62%; left:50%; transform:translate(-50%, -50%); }
    .D { top:88%; left:50%; transform:translate(-50%, -50%); }
    .E { top:50%; left:75%; transform:translate(-50%, -50%); }
    .F { top:50%; left:90%; transform:translate(-50%, -50%); }
    .G { top:50%; left:35%; transform:translate(-50%, -50%); }
    .H { top:50%; left:10%; transform:translate(-50%, -50%); }
    .summary { font-size:1.1em; margin-bottom:8px; }
    .result-title { font-size:1.2em; margin-bottom:8px; }
    .result { font-size:2em; color:red; font-weight:bold; }
  </style>
</head>
<body>
  <h2>Selecione o idioma</h2>
  <div id="language-switcher">
    <img src="images/brazil.png" alt="Português" id="flag-pt" class="selected"/>
    <img src="images/japan.png" alt="日本語" id="flag-ja"/>
    <img src="images/indonesia.png" alt="Bahasa Indonesia" id="flag-id"/>
  </div>

  <div class="diagram">
    <img src="doramu2.png" alt="Diagrama de Pontos"/>
    <span id="lblA" class="label A"></span>
    <span id="lblB" class="label B"></span>
    <span id="lblC" class="label C"></span>
    <span id="lblD" class="label D"></span>
    <span id="lblE" class="label E"></span>
    <span id="lblF" class="label F"></span>
    <span id="lblG" class="label G"></span>
    <span id="lblH" class="label H"></span>
  </div>

  <div class="summary" id="summary"></div>
  <div class="result-title">Resultado:</div>
  <div class="result" id="result"></div>

  <script>
    const keys = ['A','B','C','D','E','F','G','H'];
    const points = JSON.parse(sessionStorage.getItem('points') || '[]');
    const max = Math.max(...points);
    const min = Math.min(...points);
    const avg = (max + min) / 2;

    // Preenche todos os oito pontos
    points.forEach((v,i) => {
      const el = document.getElementById('lbl' + keys[i]);
      el.textContent = `${keys[i]} = ${v}`;
      if (v === max || v === min) el.classList.add('red');
    });

    // Identifica quais letras são max e min
    const idxMax = points.indexOf(max);
    const idxMin = points.indexOf(min);
    const letterMax = keys[idxMax], letterMin = keys[idxMin];

    document.getElementById('summary').textContent =
      `Os pontos definidos foram ${letterMax} = ${max} e ${letterMin} = ${min}`;

    // Formata média com vírgula e espaço antes do sinal
    const absAvg = Math.abs(avg).toFixed(1).replace('.', ',');
    document.getElementById('result').textContent =
      (avg < 0 ? '- ' : '') + absAvg;

    // (Opcional) lógica de troca de idioma igual ao index.html
    // usando texts2, selectLang2, etc.
  </script>
</body>
</html>
